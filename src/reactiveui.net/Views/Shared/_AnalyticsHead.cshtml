@inject Microsoft.ApplicationInsights.AspNetCore.JavaScriptSnippet AppInsightsJs

<environment names="Production">

    @Html.Raw(AppInsightsJs.FullScript)
    @if (User.Identity.IsAuthenticated)
    {
        <script>
            appInsights.setAuthenticatedUserContext("@User.Identity.Name.Replace("\\", "\\\\")".replace(/[,;=| ]+/g, "_"));
        </script>
    }
</environment>